---
layout: post
title: Gnuplot æ¡ˆä¾‹å…¥é—¨
categories: Tools
tags: Gnuplot
excerpt: Gnuplot ç»˜å›¾åˆ†æ MacBook Pro ç”µæ± è€—æŸ
image: http://www.gnuplot.info/figs/gaussians.png
description: Gnuplot ç»˜å›¾åˆ†æ MacBook Pro ç”µæ± è€—æŸ
keywords: Gnuplot, plot, MacBook, å…¥é—¨, æ¡ˆä¾‹
licences: cc
---

## ç®€ä»‹  
> &emsp;&emsp;Gnuplot æ˜¯ä¸€æ¬¾é€‚ç”¨äº Linuxï¼ŒOS/2ï¼ŒMS Windowsï¼ŒOSXï¼ŒVMS å’Œè®¸å¤šå…¶ä»–å¹³å°çš„ä¾¿æºå¼å‘½ä»¤è¡Œé©±åŠ¨å›¾å½¢å·¥å…·ã€‚æºä»£ç å—ç‰ˆæƒä¿æŠ¤ï¼Œä½†å…è´¹åˆ†å‘ï¼ˆå³ï¼Œæ‚¨ä¸å¿…ä¸ºæ­¤ä»˜è´¹ï¼‰ã€‚å®ƒæœ€åˆåˆ›å»ºçš„ç›®çš„æ˜¯è®©ç§‘å­¦å®¶å’Œå­¦ç”Ÿèƒ½å¤Ÿäº¤äº’å¼åœ°å°†æ•°å­¦å‡½æ•°å’Œæ•°æ®å¯è§†åŒ–ï¼Œä½†å·²ç»å‘å±•åˆ°æ”¯æŒè®¸å¤šéäº¤äº’å¼ç”¨é€”ï¼Œä¾‹å¦‚Webè„šæœ¬ã€‚å®ƒä¹Ÿè¢«Octaveç­‰ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºç”¨ä½œç»˜å›¾å¼•æ“ã€‚è‡ª1986å¹´ä»¥æ¥ï¼ŒGnuplotä¸€ç›´å¾—åˆ°æ”¯æŒå’Œç§¯æå‘å±•ã€‚
<div style="text-align: right;"> â€”â€” æ‘˜è‡ª <a href="http://www.gnuplot.info/">gnuplot å®˜ç½‘</a> &emsp;&emsp;</div>

* æ”¯æŒè®¸å¤šä¸åŒç±»å‹çš„ 2Dã€3D å›¾

* æ”¯æŒè®¸å¤šä¸åŒç±»å‹çš„æ ¼å¼è¾“å‡º  
	- äº¤äº’å¼å±å¹•æ˜¾ç¤ºï¼šè·¨å¹³å°ï¼ˆQtã€wxWidgetsã€X11ï¼‰ã€ç‰¹å®šå¹³å°ï¼ˆWindowsã€OS/2ï¼‰
	- ä¸°å¯Œçš„è¾“å‡ºæ ¼å¼ï¼špostscriptï¼ˆå« epsï¼‰ã€PDFã€PNGã€LaTex â€¦â€¦
	- å¯é¼ æ ‡æ“ä½œçš„ web æ˜¾ç¤ºæ ¼å¼ï¼šHTML5ã€SVG

## èµ„æº
* [è½¯ä»¶ä¸‹è½½](https://sourceforge.net/projects/gnuplot/files/gnuplot/5.2.3/)
	- æºç ï¼š[gnuplot-5.2.3.tar.gz](https://jaist.dl.sourceforge.net/project/gnuplot/gnuplot/5.2.3/gnuplot-5.2.3.tar.gz)  
	- MacOSï¼š[gnuplot-5.2.3-quartz.pkg](http://ricardo.ecn.wfu.edu/pub/gnuplot/gnuplot-5.2.3-quartz.pkg) æˆ– [Plot2 on AppStore](https://itunes.apple.com/cn/app/plot2/id846509360?mt=12)
	- Windowsï¼š[gp523-win64-mingw.7z](https://jaist.dl.sourceforge.net/project/gnuplot/gnuplot/5.2.3/gp523-win64-mingw.7z)ã€[gp523-win32-mingw.7z](https://netix.dl.sourceforge.net/project/gnuplot/gnuplot/5.2.3/gp523-win32-mingw.7z)  

* [![pdf](http://www.nand2tetris.org/icons/acrobat.gif) å®˜æ–¹ç”¨æˆ·æ‰‹å†Œ](http://www.gnuplot.info/docs_5.2/Gnuplot_5.2.pdf)

*  ã€Šä½¿ç”¨ gnuplot ç§‘å­¦ä½œå›¾ â€” Gnuplot ä¸­æ–‡æ•™ç¨‹ã€‹  
	- ä½œè€…ï¼š[é©¬æ¬¢](mailto:yusufma77@yahoo.com) 
	- [![pdf](http://www.nand2tetris.org/icons/acrobat.gif) ä¸‹è½½](https://github.com/ReionChan/PhotoRepo/raw/master/gnuplot/gnuplot_tutorial.pdf)&emsp;[![CC BY-NC-SA 3.0](https://reionchan.github.io/images/posts/cc-by-nc-sa.png)](https://creativecommons.org/licenses/by-nc-sa/3.0/)  

<div style="text-align: right;">ğŸŒ¹ç”±è¡·æ„Ÿè°¢èµ„æºä½œè€…ï¼ğŸŒ¹&emsp;&emsp;</div>

## å®‰è£…

&emsp;&emsp;æœ¬æ–‡æ¡ˆä¾‹ä½¿ç”¨ MacOS ç¯å¢ƒï¼Œæ•…åˆ†åˆ«å°è¯•äº† [gnuplot-5.2.3-quartz.pkg](http://ricardo.ecn.wfu.edu/pub/gnuplot/gnuplot-5.2.3-quartz.pkg) åŠ [Plot2 on AppStore](https://itunes.apple.com/cn/app/plot2/id846509360?mt=12) ã€‚è¯»è€…å¯ä»¥è‡ªè¡Œé€‰æ‹©ï¼Œåªæ˜¯å‰è€…è·¨å¹³å°äº¤äº’ç»ˆç«¯æ˜¯ wxtï¼Œåè€…æ˜¯ qtï¼Œä¸”é»˜è®¤æ˜¯çº¯å›¾å½¢åŒ–çš„ç»˜å›¾ç•Œé¢ã€‚åŒå‡»æŒ‰æç¤ºè¿›è¡Œå®‰è£…å³å¯ã€‚å¯¹æ¯”å‘ç° Plot2 åˆ†è¾¨ç‡æ›´é«˜ï¼Œæ•…ä¸‹æ–‡éƒ½ç”¨å®ƒæ¥æ¼”ç¤ºã€‚
  
&emsp;&emsp;æœ¬æ–‡ä¸»è¦æ¼”ç¤ºå‘½ä»¤è¡Œæ–¹å¼ï¼Œå›¾å½¢æ–¹å¼ç»˜å›¾åœ¨æ­¤å°±ä¸åšä»‹ç»ï¼Œè¯»è€…è‡ªè¡Œæ¢ç´¢ã€‚å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ç³»ç»Ÿç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼š  

```sh
Reion@MBPr ~$ gnuplot
```

&emsp;&emsp;æ˜¾ç¤ºç‰ˆæœ¬ã€å¸®åŠ©ç­‰ä¿¡æ¯ï¼š  

```

	G N U P L O T
	Version 5.2 patchlevel 0    last modified 2017-09-01 

	Copyright (C) 1986-1993, 1998, 2004, 2007-2017
	Thomas Williams, Colin Kelley and many others

	gnuplot home:     http://www.gnuplot.info
	faq, bugs, etc:   type "help FAQ"
	immediate help:   type "help"  (plot window: hit 'h')

Terminal type is now 'qt'
gnuplot> 
```  

&emsp;&emsp;åœ¨å‡ºç°çš„ `gnuplot>` å¤„è¾“å…¥ `test` å‘½ä»¤ï¼Œå¼¹å‡º qt ç»ˆç«¯çš„é£æ ¼ä»£ç æµ‹è¯•å›¾ï¼š

```sh
gnuplot> test
```

<center><img src="https://raw.githubusercontent.com/ReionChan/PhotoRepo/master/gnuplot/test.png" width="600" /><br /> å›¾ä¸€ qt ç»ˆç«¯çš„é£æ ¼ä»£ç æµ‹è¯•å›¾</center>

## æ¡ˆä¾‹
### ä»‹ç»
&emsp;&emsp;æœ¬æ¡ˆä¾‹å°†ç”¨ Gnuplot æ¥ç»˜åˆ¶ç¬”è€…çš„ MBP çš„ç”µæ± å®¹é‡è€—æŸå›¾ã€‚åŸºç¡€å®éªŒæ•°æ®æ¥æºäº [**coconutBattery**](https://www.coconut-flavour.com/coconutbattery/)ï¼Œå®ƒæ˜¯ä¸€æ¬¾èƒ½å¤Ÿè®°å½• Macã€iOSè®¾å¤‡çš„ç”µæ± å¥åº·åº¦çš„è½¯ä»¶ï¼Œå¯¹è½¯ä»¶ä½œè€…è¡¨ç¤ºç”±è¡·æ„Ÿè°¢ã€‚ç”¨æ­¤è½¯ä»¶é‡‡é›†äº† 40 ä¸ªæœˆä¸­ MBP çš„ç”µæ± å®¹é‡æ•°æ®ï¼Œå°†åˆ†åˆ«ä»¥æ—¶é—´ã€å……ç”µå¾ªç¯æ¬¡æ•°ä¸¤ä¸ªç»´åº¦æ¥ç»˜åˆ¶å±•ç°ç”µæ± çš„å®¹é‡æ›²çº¿ã€‚

### å­¦ä¹ èƒŒæ™¯çŸ¥è¯† (20 min)
&emsp;&emsp;è·å–ä¸Šé¢èµ„æºé‡Œçš„ã€Šä½¿ç”¨ gnuplot ç§‘å­¦ä½œå›¾ â€” Gnuplot ä¸­æ–‡æ•™ç¨‹ã€‹ï¼Œæœ¬æ¡ˆä¾‹æ¶‰åŠçš„å¿…å¤‡çŸ¥è¯†ç‚¹éƒ½å›Šæ‹¬åœ¨ä¸‹é¢ï¼Œæ ¹æ®çŸ¥è¯†ç‚¹åºå·å®šä½æŸ¥é˜…ï¼Œä½œè€…å†™å¾—å¾ˆè¯¦ç»†ï¼Œåœ¨æ­¤å°±ä¸åšè¿‡å¤šèµ˜è¿°ï¼š  

* å‰ 10 ä¸ªçŸ¥è¯†ç‚¹ï¼Œæ¶‰åŠå®‰è£…å¯åŠ¨ã€`plot`ã€`set`ã€`replot`ã€ç‚¹çº¿é£æ ¼ç­‰å‘½ä»¤çŸ¥è¯†
* ç¬¬ 17ã€18ã€35ã€43 çŸ¥è¯†ç‚¹ï¼Œæ¶‰åŠè¾¹æ¡†ã€åæ ‡ã€å¡«å……åŠè„šæœ¬å¯¼å…¥æ‰§è¡Œå‘½ä»¤

### åŸºæœ¬å®éªŒæ•°æ®  

* åŸºäºæ—¶é—´ç»´åº¦çš„ç”µæ± å®¹é‡æ•°æ®&emsp;[ç‚¹å‡»ä¸‹è½½](https://github.com/ReionChan/PhotoRepo/blob/master/gnuplot/capacity_base_on_age_of_battery.dat)

&emsp;&emsp;æ•°æ®ä¸ºå››åˆ—ï¼Œä»¥ `tab` ç¬¦å·åˆ†éš”çš„æ–‡æœ¬æ ¼å¼ï¼š

```json
#å¾ªç¯æ¬¡æ•°  å®¹é‡  æœˆæ•°       æ—¶é—´
102     6019     12     2014-12
111     5725     13 	2015-01
122     5920     14 	2015-02
134     5850     15 	2015-03
144     5997     16 	2015-04
145     6057     17 	2015-05
156     6036     18 	2015-06
166     6033     19 	2015-07	
```


* åŸºäºå……ç”µå¾ªç¯æ¬¡æ•°çš„ç”µæ± å®¹é‡æ•°æ®&emsp;[ç‚¹å‡»ä¸‹è½½](https://github.com/ReionChan/PhotoRepo/blob/master/gnuplot/capacity_base_on_loadcycles.dat) 

&emsp;&emsp;æ•°æ®ä¸ºä¸‰åˆ—ï¼Œä»¥ `tab` ç¬¦å·åˆ†éš”çš„æ–‡æœ¬æ ¼å¼ï¼š

```json
#å¾ªç¯æ¬¡æ•° å®¹é‡        æ—¶é—´	
98      5899     2014-12-24
99      5947     2014-12-24
100     5896     2014-12-25
100     5901     2014-12-25
101     6017     2014-12-26
101     6007     2014-12-27
102     5830     2014-12-28	
```

### è„šæœ¬ç¼–å†™è¿è¡Œ (10 min)

* ç”µæ± å®¹é‡éšå……ç”µå¾ªç¯æ¬¡æ•°å˜åŒ–è„šæœ¬
 
```sh
# è®¾ç½®å›¾è¡¨ä¸»æ ‡é¢˜
set title "MacBook Proï¼ˆRetinaï¼Œ13 è‹±å¯¸ï¼Œ2013 å¹´æœ«ï¼‰ç”µæ± å®¹é‡å……ç”µå¾ªç¯è€—æŸè¡¨"
# æ˜¾ç¤ºå›¾ä¾‹è¯´æ˜
set key
# æ˜¾ç¤ºèƒŒæ™¯æ ¼å­
set grid
# è®¾ç½® X è½´æ ‡ç­¾
set xlabel "å……ç”µå¾ªç¯æ¬¡æ•°"
# è®¾ç½® X è½´æ•°å€¼èŒƒå›´
set xrange [90:310]
# è®¾ç½® X è½´æ•°å€¼åˆ»åº¦ç²¾åº¦
set xtics 90,10,310
# å–æ¶ˆ X è½´åˆ»åº¦é•œåƒæ˜¾ç¤º
set xtics nomirror
# è®¾ç½® Y è½´æ ‡ç­¾
set ylabel "ç”µæ± å®¹é‡ï¼ˆmAhï¼‰"
# è®¾ç½® Y è½´æ•°å€¼èŒƒå›´
set yrange [4500:6500]
# è®¾ç½® Y è½´æ•°å€¼åˆ»åº¦ç²¾åº¦
set ytics 4500,500,6500
# å–æ¶ˆ Y è½´åˆ»åº¦é•œåƒæ˜¾ç¤º
set ytics nomirror
# ç»˜åˆ¶å•æ¡æŠ˜çº¿å›¾
plot "capacity_base_on_loadcycles.dat" using 1:2 with lp pt -1 lw 3 lc 2 title "ç”µæ± å®¹é‡"
```

&emsp;&emsp;è„šæœ¬å­˜åˆ°æ•°æ®æ–‡ä»¶åŒç›®å½•ä¸‹ä»¥ **`.gnu`** ç»“å°¾çš„æ–‡ä»¶ä¸­ï¼Œ**åœ¨æ­¤ç›®å½•æ‰“å¼€ç»ˆç«¯**è¾“å…¥ï¼š  
 
 ```sh
 # è¿è¡Œ gnuplot
 Reion@MBPr ~$ gnuplot
 # è¿›å…¥ gnuplot ä¼šè¯ï¼Œç»§ç»­è¾“å…¥ load å‘½ä»¤
 gnuplot> load "capacity_base_on_loadcycles.gnu"
 ``` 

&emsp;&emsp;ç»˜åˆ¶çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥é€‰æ‹©å¯¼å‡ºå¤šç§æ ¼å¼ï¼Œæ­¤ä¾‹ä¸º SVG æ ¼å¼ï¼š  

<center><picture>
    <source type="image/svg+xml" srcset="https://raw.githubusercontent.com/ReionChan/PhotoRepo/master/gnuplot/capacity_base_on_loadcycles.svg?sanitize=true">
    <img src="https://raw.githubusercontent.com/ReionChan/PhotoRepo/master/gnuplot/capacity_base_on_loadcycles.png" alt="capacity_base_on_loadcycles"  width="800">
</picture> å›¾äºŒ ç”µæ± å®¹é‡éšå……ç”µå¾ªç¯æ¬¡æ•°å˜åŒ–</center>

* ç”µæ± å®¹é‡éšæ—¶é—´å˜åŒ–è„šæœ¬

```sh
# è®¾ç½®å›¾è¡¨ä¸»æ ‡é¢˜
set title "MacBook Proï¼ˆRetinaï¼Œ13 è‹±å¯¸ï¼Œ2013 å¹´æœ«ï¼‰ç”µæ± å®¹é‡æ—¶é—´è€—æŸè¡¨"
# æ˜¾ç¤ºå›¾ä¾‹è¯´æ˜
set key
# æ˜¾ç¤ºèƒŒæ™¯æ ¼å­
set grid
# è®¾ç½® X è½´æ ‡ç­¾
set xlabel "ä½¿ç”¨æœˆæ•°"
# è®¾ç½® X è½´æ•°å€¼èŒƒå›´
set xrange [12:52]
# è®¾ç½® X è½´æ•°å€¼åˆ»åº¦ç²¾åº¦
set xtics 12,1,52
# å–æ¶ˆ X è½´åˆ»åº¦é•œåƒæ˜¾ç¤º
set xtics nomirror
# è®¾ç½® Y è½´æ ‡ç­¾
set ylabel "ç”µæ± å®¹é‡ï¼ˆmAhï¼‰"
# è®¾ç½® Y è½´æ•°å€¼èŒƒå›´
set yrange [4500:6500]
# è®¾ç½® Y è½´æ•°å€¼åˆ»åº¦ç²¾åº¦
set ytics 4500,500,6500
# å–æ¶ˆ Y è½´åˆ»åº¦é•œåƒæ˜¾ç¤º
set ytics nomirror
# è®¾ç½®å¡«å……é€æ˜åº¦
set style fill solid 0.2
# ç»˜å‡ºç”µæ± å®¹é‡å¡«å……å›¾ã€æŸè€—ç‚¹æŠ˜çº¿å›¾ï¼Œå¤åˆæˆæœ€ç»ˆæ•ˆæœ
plot "capacity_base_on_age_of_battery.dat" using 3:2 with filledcurves y1=0 lc 2 title "ç”µæ± å®¹é‡", "capacity_base_on_age_of_battery.dat" using 3:2 axis x1y1 with lp pt 7 ps 2 lw 1 lc 2 title "æŸè€—æŠ˜çº¿"
```
&emsp;&emsp;è„šæœ¬å­˜åˆ°æ•°æ®æ–‡ä»¶åŒç›®å½•ä¸‹ä»¥ **`.gnu`** ç»“å°¾çš„æ–‡ä»¶ä¸­ï¼Œ**åœ¨æ­¤ç›®å½•æ‰“å¼€ç»ˆç«¯**è¾“å…¥ï¼š  
 
 ```sh
 # è¿è¡Œ gnuplot
 Reion@MBPr ~$ gnuplot
 # è¿›å…¥ gnuplot ä¼šè¯ï¼Œç»§ç»­è¾“å…¥ load å‘½ä»¤
 gnuplot> load "capacity_base_on_age_of_battery.gnu"
 ``` 

&emsp;&emsp;ç»˜åˆ¶çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥é€‰æ‹©å¯¼å‡ºå¤šç§æ ¼å¼ï¼Œæ­¤ä¾‹ä¸º SVG æ ¼å¼ï¼š  

<center><picture>
    <source type="image/svg+xml" srcset="https://raw.githubusercontent.com/ReionChan/PhotoRepo/master/gnuplot/capacity_base_on_age_of_battery.svg?sanitize=true">
    <img src="https://raw.githubusercontent.com/ReionChan/PhotoRepo/master/gnuplot/capacity_base_on_age_of_battery.png" alt="capacity_base_on_age_of_battery"  width="800">
</picture> å›¾ä¸‰ ç”µæ± å®¹é‡éšæ—¶é—´å˜åŒ–</center>

## æ€»ç»“

&emsp;&emsp;æ¡ˆä¾‹ä½¿ç”¨ gnuplot ç»˜åˆ¶ç®€å•çš„ 2D å›¾è¡¨ï¼Œæ›´å¤šå¤æ‚æœ‰æ„æ€çš„å›¾è¡¨å¯ä»¥ç‚¹å‡» [Demo](http://gnuplot.sourceforge.net/demo_5.2/) è¿›è¡Œå­¦ä¹ ã€‚

* å‚è€ƒèµ„æ–™ï¼š
	- å®˜ç½‘ <http://www.gnuplot.info/>
	- gnuplot manpage by `man gnuplot`
	- ä¹¦ç±ã€Šä½¿ç”¨ gnuplot ç§‘å­¦ä½œå›¾ â€” Gnuplot ä¸­æ–‡æ•™ç¨‹ã€‹  
